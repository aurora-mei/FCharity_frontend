.floating-chat-button {
  position: fixed; /* Cố định vị trí so với màn hình */
  bottom: 30px;   /* Cách đáy màn hình */
  right: 30px;    /* Cách phải màn hình */
  z-index: 1000;  /* Đảm bảo nút nổi trên các thành phần khác */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  /* Thêm hiệu ứng khi hover nếu muốn */
  transition: transform 0.2s ease-in-out;

  &:hover {
    transform: scale(1.1);
  }
}

.chatbox-wrapper {
  position: fixed; /* Cố định vị trí */
  bottom: 100px;  /* Vị trí cách đáy, cao hơn nút bấm */
  right: 30px;   /* Cùng vị trí phải với nút bấm */
  width: 350px;  /* Chiều rộng cửa sổ chat */
  max-height: calc(100vh - 120px); /* Chiều cao tối đa, tránh tràn màn hình */
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  z-index: 999; /* Thấp hơn nút bấm một chút để nút luôn bấm được, nhưng cao hơn nội dung khác */
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Ngăn nội dung tràn ra ngoài */
  /* Thêm animation mở/đóng nếu muốn */
  animation: slideUp 0.3s ease-out;
}

.chatbox-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 15px;
    background-color: #1890ff; /* Hoặc màu primary của bạn */
    color: white;
    font-weight: bold;
    border-bottom: 1px solid #f0f0f0;
    flex-shrink: 0; /* Không cho header co lại */

     span {
        display: flex;
        align-items: center;
        gap: 8px; /* Khoảng cách giữa icon và text */
     }

    .close-chat-button {
        color: white;
        &:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
    }
}

/* Điều chỉnh lại style của GeminiChatbox để phù hợp khi nằm trong wrapper */
.chatbox-wrapper .gemini-chatbox-container {
    border: none; /* Bỏ border của chatbox gốc */
    box-shadow: none; /* Bỏ shadow của chatbox gốc */
    margin: 0; /* Reset margin */
    max-width: 100%; /* Chiếm toàn bộ wrapper */
    height: 100%; /* Chiếm toàn bộ chiều cao còn lại */
    flex-grow: 1; /* Cho phép container chatbox co giãn */
}

/* Optional: Animation */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Có thể cần điều chỉnh style của .chat-display-area bên trong GeminiChatbox nếu cần */
/* Ví dụ: đảm bảo nó không có height cố định mà linh hoạt theo wrapper */
.chatbox-wrapper .gemini-chatbox-container .chat-display-area {
   height: auto; /* Hoặc bỏ hẳn height nếu không cần */
   flex-grow: 1; /* Quan trọng: cho phép vùng hiển thị chat co giãn */
}

.chatbox-wrapper .gemini-chatbox-container .chat-input-area {
    flex-shrink: 0; /* Không cho vùng input co lại */
}

.chatbox-wrapper {
  position: fixed;
  bottom: 100px;
  right: 30px;
  width: 350px; /* Hoặc 400px nếu muốn rộng hơn */
  /* Đặt max-height cụ thể hoặc tính toán */
  max-height: 500px; /* Ví dụ: chiều cao tối đa cố định */
  /* Hoặc giữ lại tính toán nếu muốn nó phụ thuộc vào chiều cao màn hình */
  /* max-height: calc(100vh - 150px); */
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  z-index: 999;
  display: flex; /* Quan trọng */
  flex-direction: column; /* Quan trọng */
  overflow: hidden; /* Quan trọng: Ngăn chính wrapper bị tràn */
  animation: slideUp 0.3s ease-out;
}

.chatbox-header {
  /* ... styles ... */
  flex-shrink: 0; /* Quan trọng: Không cho header co lại */
}

/* Target container của GeminiChatBox KHI nó nằm trong wrapper */
.chatbox-wrapper .gemini-chatbox-container {
  flex-grow: 1; /* Quan trọng: Cho phép container này lấp đầy không gian còn lại */
  display: flex; /* Nó đã là flex rồi, nhưng đảm bảo */
  flex-direction: column; /* Nó đã là column rồi, nhưng đảm bảo */
  overflow: hidden; /* Quan trọng: Ngăn container này tràn ra ngoài wrapper */
  min-height: 0; /* Quan trọng: Sửa lỗi flexbox overflow */
  /* Không cần set height: 100% ở đây nếu đã có flex-grow */
  border: none;
  box-shadow: none;
  margin: 0;
  max-width: 100%;
}